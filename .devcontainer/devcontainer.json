// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/debian
{
    "name": "marcusrbrown/.dotfiles",

    "build": {
        "dockerfile": "Dockerfile"
    },

    "hostRequirements": {
        "cpus": 4
    },

    // Features to add to the dev container. More info: https://containers.dev/features.
    "features": {
        // "ghcr.io/devcontainers/features/common-utils:2": {
        //     "configureZshAsDefaultShell": true,
        //     "username": "vscode",
        //     "userUid": 1000,
        //     "userGid": 1000
        // },
        // "ghcr.io/devcontainers/features/git:1": {},
        "ghcr.io/devcontainers/features/github-cli:1": {}
    },

    // Use 'forwardPorts' to make a list of ports inside the container available locally.
    // "forwardPorts": [],

    // Configure tool-specific properties.
    "customizations": {
        "vscode": {
            "extensions": [
                "EditorConfig.EditorConfig",
                "esbenp.prettier-vscode",
                "foxundermoon.shell-format",
                "github.copilot",
                "github.vscode-github-actions",
                "GitHub.vscode-pull-request-github",
                "jeff-hykin.better-shellscript-syntax",
                "mads-hartmann.bash-ide-vscode",
                "redhat.vscode-yaml",
                "tamasfe.even-better-toml",
                "timonwong.shellcheck"
            ]
        }
    },

    "postCreateCommand": ".devcontainer/post-create.sh",
    "waitFor": "postCreateCommand",
    "containerEnv": {
        "XDG_CONFIG_HOME": "${containerWorkspaceFolder}/.config",
        "XDG_CACHE_HOME": "${containerWorkspaceFolder}/.cache",
        "XDG_DATA_HOME": "${containerWorkspaceFolder}/.local/share",
        "XDG_STATE_HOME": "${containerWorkspaceFolder}/.local/state"
    },
    "remoteEnv": {
        "GIT_DIR": "${containerWorkspaceFolder}/.dotfiles",
        "GIT_WORK_TREE": "${containerWorkspaceFolder}"
    },
    "remoteUser": "vscode",
    "workspaceFolder": "/home/vscode",
    "workspaceMount": "source=local-clone,target=/home/vscode,type=volume"
}
