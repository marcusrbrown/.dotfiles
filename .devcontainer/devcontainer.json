// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/debian
{
    "name": "marcusrbrown/.dotfiles",

    "image": "mcr.microsoft.com/devcontainers/base:1.0.3-bookworm",

    "hostRequirements": {
        "cpus": 4
    },

    // Features to add to the dev container. More info: https://containers.dev/features.
    "features": {
        "ghcr.io/devcontainers/features/github-cli:1": {}
    },

    "customizations": {
        "vscode": {
            "extensions": [
                "EditorConfig.EditorConfig",
                "esbenp.prettier-vscode",
                "foxundermoon.shell-format",
                "github.copilot",
                "github.vscode-github-actions",
                "GitHub.vscode-pull-request-github",
                "jeff-hykin.better-shellscript-syntax",
                "redhat.vscode-yaml",
                "tamasfe.even-better-toml",
                "timonwong.shellcheck"
            ],
            "settings": {
                "terminal.integrated.defaultProfile.linux": "zsh",
                "terminal.integrated.profiles.linux": {
                    "zsh": {
                        "path": "/usr/bin/zsh"
                    }
                }
            }
        }
    },

    "containerEnv": {
        "ANDROID_SDK_HOME": "${HOME}/.local/share/android",
        "DC_NMMODE": "hardlinks-local",
        "GNUPGHOME": "${HOME}/.config/gnupg",
        "NPM_CONFIG_USERCONFIG": "${HOME}/.config/npm/npmrc",
        "RANDFILE": "${HOME}/.cache/randfile",
        "REMOTE_WORKSPACE": "${remoteWorkspaceFolder}",
        "TERMINFO": "${HOME}/.local/share/terminfo",
        "XDG_CONFIG_HOME": "${containerWorkspaceFolder}/.config",
        "XDG_CACHE_HOME": "${containerWorkspaceFolder}/.cache",
        "XDG_DATA_HOME": "${containerWorkspaceFolder}/.local/share",
        "XDG_STATE_HOME": "${containerWorkspaceFolder}/.local/state",
        "ZDOTDIR": "${HOME}/.config/zsh"
    },
    "remoteEnv": {
        "GIT_DIR": "${containerWorkspaceFolder}/.dotfiles",
        "GIT_WORK_TREE": "${containerWorkspaceFolder}"
    },
    "remoteUser": "vscode",
    "workspaceFolder": "/home/vscode",
    "workspaceMount": "source=dotfiles-dev,target=/home/vscode,type=volume"
}
