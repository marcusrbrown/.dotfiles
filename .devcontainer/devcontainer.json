// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/debian
{
    "name": "marcusrbrown/.dotfiles",

    "image": "mcr.microsoft.com/devcontainers/base:1.0.3",

    "hostRequirements": {
        "cpus": 4
    },

    // Features to add to the dev container. More info: https://containers.dev/features.
    "features": {
        "ghcr.io/devcontainers/features/common-utils:2.4.7": {
            "installZsh": true,
            "configureZshAsDefaultShell": true,
            "installOhMyZsh": false,
            "installOhMyZshConfig": false,
            "username": "vscode"
        },
        "ghcr.io/devcontainers/features/github-cli:1.0.13": {}
    },

    "customizations": {
        "vscode": {
            "extensions": [
                "bmalehorn.shell-syntax",
                "EditorConfig.EditorConfig",
                "esbenp.prettier-vscode",
                "foxundermoon.shell-format",
                "github.copilot",
                "github.vscode-github-actions",
                "GitHub.vscode-pull-request-github",
                "jeff-hykin.better-shellscript-syntax",
                "redhat.vscode-yaml",
                "sourcegraph.cody-ai",
                "tamasfe.even-better-toml",
                "timonwong.shellcheck",
                "usernamehw.errorlens"
            ],
            "settings": {
                "terminal.integrated.defaultProfile.linux": "zsh"
            }
        }
    },

    "containerEnv": {
        "ANDROID_SDK_HOME": "${containerWorkspaceFolder}/.local/share/android",
        "DC_NMMODE": "hardlinks-local",
        "GNUPGHOME": "${containerWorkspaceFolder}/.config/gnupg",
        "LOCAL_WORKSPACE": "${localWorkspaceFolder}",
        "NPM_CONFIG_USERCONFIG": "${containerWorkspaceFolder}/.config/npm/npmrc",
        "RANDFILE": "${containerWorkspaceFolder}/.cache/randfile",
        "TERMINFO": "${containerWorkspaceFolder}/.local/share/terminfo",
        "XDG_CONFIG_HOME": "${containerWorkspaceFolder}/.config",
        "XDG_CACHE_HOME": "${containerWorkspaceFolder}/.cache",
        "XDG_DATA_HOME": "${containerWorkspaceFolder}/.local/share",
        "XDG_STATE_HOME": "${containerWorkspaceFolder}/.local/state",
        "ZDOTDIR": "${containerWorkspaceFolder}/.config/zsh"
    },
    "remoteEnv": {
        "GIT_DIR": "${containerWorkspaceFolder}/.dotfiles",
        "GIT_WORK_TREE": "${containerWorkspaceFolder}"
    },
    "remoteUser": "vscode",
    "workspaceFolder": "/home/vscode",
    "workspaceMount": "source=dotfiles-dev,target=/home/vscode,type=volume"
}
